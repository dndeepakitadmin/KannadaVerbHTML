import streamlit as st
from io import BytesIO

st.set_page_config(page_title="Kannada Verb Sentence Generator", layout="centered")

st.markdown("""
<h1 style='text-align:center; color:#4CAF50;'>üìò ‡≤ï‡≤®‡≥ç‡≤®‡≤° ‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤æ‡≤™‡≤¶ ‡≤µ‡≤æ‡≤ï‡≥ç‡≤Ø ‡≤∞‡≤ö‡≤®‡≥Ü</h1>
<p style='text-align:center;'>‡≤í‡≤Ç‡≤¶‡≥Å ‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤æ‡≤™‡≤¶ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤µ‡≤∏‡≥ç‡≤§‡≥Å ‡≤®‡≥Ä‡≤°‡≤ø ‚Äî ‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤ï‡≤æ‡≤≤‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤µ‡≤æ‡≤ï‡≥ç‡≤Ø‡≤ó‡≤≥‡≥Å ‡≤∞‡≤ö‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü</p>
""", unsafe_allow_html=True)

# User Inputs
verb = st.text_input("üî§ ‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤æ‡≤™‡≤¶ (‡≤â‡≤¶‡≤æ: ‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å, ‡≤ï‡≥Å‡≤°‡≤ø, ‡≤ì‡≤¶‡≥Å):")
obj = st.text_input("üçé ‡≤µ‡≤∏‡≥ç‡≤§‡≥Å / ‡≤µ‡≤ø‡≤∑‡≤Ø (‡≤â‡≤¶‡≤æ: ‡≤π‡≤£‡≥ç‡≤£‡≥Å, ‡≤®‡≥Ä‡≤∞‡≥Å, ‡≤ï‡≥Ü‡≤≤‡≤∏):")

# Function to generate Kannada sentences
def generate_sentences(verb, obj):
    persons = {
        "‡≤®‡≤æ‡≤®‡≥Å": ["‡≤§‡≤ø‡≤Ç‡≤¶‡≥Ü", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥á‡≤®‡≥Ü", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤µ‡≥Ü"],
        "‡≤®‡≥Ä‡≤®‡≥Å": ["‡≤§‡≤ø‡≤Ç‡≤¶‡≥Ü", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥Ä‡≤Ø", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤µ‡≥Ü"],
        "‡≤Ö‡≤µ‡≤®‡≥Å": ["‡≤§‡≤ø‡≤Ç‡≤¶", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≤æ‡≤®‡≥Ü", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤§‡≥ç‡≤§‡≤æ‡≤®‡≥Ü"],
        "‡≤Ö‡≤µ‡≤≥‡≥Å": ["‡≤§‡≤ø‡≤Ç‡≤¶‡≤≥‡≥Å", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≤æ‡≤≥‡≥Ü", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤§‡≥ç‡≤§‡≤æ‡≤≥‡≥Ü"],
        "‡≤®‡≤æ‡≤µ‡≥Å": ["‡≤§‡≤ø‡≤Ç‡≤¶‡≥Ü‡≤µ‡≥Å", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥á‡≤µ‡≥Ü", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤µ‡≥Ü‡≤µ‡≥Å"],
        "‡≤®‡≥Ä‡≤µ‡≥Å": ["‡≤§‡≤ø‡≤Ç‡≤¶‡≤ø‡≤∞‡≤ø", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥Ä‡≤∞‡≤ø", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤µ‡≤ø‡≤∞‡≤ø"],
        "‡≤Ö‡≤µ‡≤∞‡≥Å": ["‡≤§‡≤ø‡≤Ç‡≤¶‡≤∞‡≥Å", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≤æ‡≤∞", "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å‡≤µ‡≤∞‡≥Å"]
    }

    html = "<div style='font-size:20px; line-height:1.8;'>"
    for person, tenses in persons.items():
        html += f"<h3>üßç {person}</h3>"
        html += f"<b>‡≤π‡≤ø‡≤Ç‡≤¶‡≤ø‡≤® ‡≤ï‡≤æ‡≤≤:</b> {person} ‡≤®‡≤ø‡≤®‡≥ç‡≤®‡≥Ü {obj} {tenses[0]}<br>"
        html += f"<b>‡≤µ‡≤∞‡≥ç‡≤§‡≤Æ‡≤æ‡≤® ‡≤ï‡≤æ‡≤≤:</b> {person} ‡≤à‡≤ó {obj} {tenses[1]}<br>"
        html += f"<b>‡≤≠‡≤µ‡≤ø‡≤∑‡≥ç‡≤Ø‡≤§‡≥ç‡≤§‡≤ø‡≤® ‡≤ï‡≤æ‡≤≤:</b> {person} ‡≤®‡≤æ‡≤≥‡≥Ü {obj} {tenses[2]}<br><br>"
    html += "</div>"
    return html

if st.button("‚ú® ‡≤µ‡≤æ‡≤ï‡≥ç‡≤Ø ‡≤∞‡≤ö‡≤ø‡≤∏‡≥Å"):
    if verb.strip() and obj.strip():
        html_output = generate_sentences(verb, obj)
        st.markdown(html_output, unsafe_allow_html=True)

        # Download as HTML
        html_file = f"""
        <html>
        <head><meta charset="UTF-8"><title>{verb} Sentences</title></head>
        <body>{html_output}</body></html>
        """
        buffer = BytesIO(html_file.encode('utf-8'))
        st.download_button("‚¨áÔ∏è HTML ‡≤´‡≥à‡≤≤‡≥ç ‡≤°‡≥å‡≤®‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø", buffer, file_name=f"{verb}.html", mime="text/html")
    else:
        st.warning("‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤æ‡≤™‡≤¶ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤µ‡≤∏‡≥ç‡≤§‡≥Å ‡≤®‡≤Æ‡≥Ç‡≤¶‡≤ø‡≤∏‡≤ø.")
