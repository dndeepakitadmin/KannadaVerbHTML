import streamlit as st
from docx import Document
from io import BytesIO

st.set_page_config(page_title="Kannada Verb Sentence Generator", layout="centered")

st.title("üáÆüá≥ ‡≤ï‡≤®‡≥ç‡≤®‡≤° ‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤æ‡≤™‡≤¶ ‡≤µ‡≤æ‡≤ï‡≥ç‡≤Ø ‡≤®‡≤ø‡≤∞‡≥ç‡≤Æ‡≤æ‡≤™‡≤ï (Kannada Verb Sentence Maker)")

# --- Subjects and verb endings ---
subjects = {
    "‡≤®‡≤æ‡≤®‡≥Å": {"past": "‡≥Ü", "present": "‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥Ä‡≤®‡≤ø", "future": "‡≥Å‡≤µ‡≥á"},
    "‡≤®‡≥Ä‡≤®‡≥Å": {"past": "‡≥Ü", "present": "‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥Ä‡≤Ø", "future": "‡≥Å‡≤µ‡≥Ä‡≤Ø"},
    "‡≤Ö‡≤µ‡≤®‡≥Å": {"past": "‡≤®", "present": "‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≤æ‡≤®‡≥Ü", "future": "‡≥Å‡≤§‡≥ç‡≤§‡≤æ‡≤®‡≥Ü"},
    "‡≤Ö‡≤µ‡≤≥‡≥Å": {"past": "‡≤≥‡≥Å", "present": "‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≤æ‡≤≥‡≥Ü", "future": "‡≥Å‡≤§‡≥ç‡≤§‡≤æ‡≤≥‡≥Ü"},
    "‡≤®‡≤æ‡≤µ‡≥Å": {"past": "‡≥Ü‡≤µ‡≥Å", "present": "‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥á‡≤µ‡≥Ü", "future": "‡≥Å‡≤µ‡≥á‡≤µ‡≥Å"},
    "‡≤®‡≥Ä‡≤µ‡≥Å": {"past": "‡≤ø‡≤¶‡≥ç‡≤¶‡≤ø‡≤∞‡≤ø", "present": "‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≥Ä‡≤∞‡≤ø", "future": "‡≥Å‡≤µ‡≥Ä‡≤∞‡≤ø"},
    "‡≤Ö‡≤µ‡≤∞‡≥Å": {"past": "‡≤¶‡≤∞‡≥Å", "present": "‡≤§‡≥ç‡≤§‡≤ø‡≤¶‡≥ç‡≤¶‡≤æ‡≤∞‡≥Ü", "future": "‡≥Å‡≤§‡≥ç‡≤§‡≤æ‡≤∞"}
}

# --- Verb list ---
verbs = [
    "‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≥Å","‡≤ï‡≥Å‡≤°‡≤ø","‡≤ì‡≤¶‡≥Å","‡≤¨‡≤∞‡≥Ü‡≤Ø‡≥Å","‡≤π‡≥ã‡≤ó‡≥Å","‡≤¨‡≤æ","‡≤®‡≥ã‡≤°‡≥Å","‡≤ï‡≥á‡≤≥‡≥Å","‡≤Æ‡≤≤‡≤ó‡≥Å","‡≤®‡≤ø‡≤≤‡≥ç‡≤≤‡≥Å",
    "‡≤ï‡≥Å‡≤≥‡≤ø‡≤§‡≥Å","‡≤ï‡≥Ç‡≤∞‡≥Å","‡≤®‡≤ó‡≥Å","‡≤Ö‡≤≥‡≥Å","‡≤®‡≤°‡≥Ü‡≤Ø‡≥Å","‡≤ì‡≤°‡≥Å","‡≤è‡≤≥‡≥Å","‡≤§‡≤ó‡≥Ü‡≤¶‡≥Å‡≤ï‡≥ã","‡≤ï‡≥ä‡≤°‡≥Å","‡≤á‡≤°‡≥Å",
    "‡≤§‡≥Ü‡≤∞‡≥Ü","‡≤Æ‡≥Å‡≤ö‡≥ç‡≤ö‡≥Å","‡≤§‡≥ã‡≤∞‡≤ø‡≤∏‡≥Å","‡≤π‡≥á‡≤≥‡≥Å","‡≤Æ‡≤æ‡≤°‡≥Å","‡≤á‡≤∞‡≥Å","‡≤¨‡≤∏‡≥Å","‡≤§‡≤ó‡≥Ü","‡≤¨‡≥Ä‡≤≥‡≥Å","‡≤®‡≤ø‡≤≤‡≥ç‡≤≤‡≤ø‡≤∏‡≥Å",
    "‡≤π‡≤∞‡≤ø","‡≤Ü‡≤°‡≥Å","‡≤ï‡≤≤‡≤ø‡≤§‡≥Å‡≤ï‡≥ã","‡≤®‡≥Ü‡≤®‡≤™‡≥Å‡≤Æ‡≤æ‡≤°‡≥Å","‡≤Æ‡≤∞‡≥Ü‡≤§‡≥Å‡≤¨‡≤ø‡≤°‡≥Å","‡≤®‡≥ã‡≤°‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≥Å","‡≤π‡≥ã‡≤ó‡≤ø‡≤¨‡≤ø‡≤°‡≥Å","‡≤§‡≤∞‡≤≤‡≥Å",
    "‡≤ï‡≤§‡≥ç‡≤§‡≤∞‡≤ø‡≤∏‡≥Å","‡≤§‡≥ä‡≤≥‡≥Ü‡≤Ø‡≥Å","‡≤§‡≤ø‡≤®‡≥ç‡≤®‡≤ø‡≤∏‡≥Å","‡≤π‡≥ä‡≤°‡≥Ü","‡≤π‡≤ø‡≤°‡≤ø","‡≤ì‡≤¶‡≤ø","‡≤π‡≤æ‡≤°‡≥Å","‡≤®‡≥É‡≤§‡≥ç‡≤Ø‡≤Æ‡≤æ‡≤°‡≥Å","‡≤ï‡≤≥‡≥Ü",
    "‡≤ó‡≥Ü‡≤≤‡≥ç‡≤≤‡≥Å","‡≤í‡≤ó‡≥Ü","‡≤∏‡≥á‡≤∞‡≤ø‡≤∏‡≥Å"
]

# --- Object list ---
objects = ["‡≤π‡≤£‡≥ç‡≤£‡≥Å", "‡≤ö‡≤π‡≤æ", "‡≤™‡≤æ‡≤†", "‡≤™‡≤§‡≥ç‡≤∞", "‡≤Æ‡≤®‡≤ó‡≥Ü", "‡≤Æ‡≥à‡≤¶‡≤æ‡≤®", "‡≤ö‡≤ø‡≤§‡≥ç‡≤∞", "‡≤ó‡≥Ä‡≤§‡≥Ü", "‡≤™‡≤æ‡≤†", "‡≤ú‡≤≤"]

# --- User inputs ---
verb = st.selectbox("‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤æ‡≤™‡≤¶ ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø (Choose a Verb)", verbs)
obj = st.selectbox("‡≤µ‡≤∏‡≥ç‡≤§‡≥Å ‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø (Choose an Object)", objects)

st.markdown("---")

# --- Sentence generation ---
st.subheader("ü™∂ ‡≤®‡≤ø‡≤∞‡≥ç‡≤Æ‡≤ø‡≤§ ‡≤µ‡≤æ‡≤ï‡≥ç‡≤Ø‡≤ó‡≤≥‡≥Å (Generated Sentences)")
output = ""

for person, endings in subjects.items():
    past = f"{person} ‡≤®‡≤ø‡≤®‡≥ç‡≤®‡≥Ü {obj}‡≤®‡≥ç‡≤®‡≥Å {verb[:-2]}{endings['past']}."
    present = f"{person} ‡≤à‡≤ó {obj}‡≤®‡≥ç‡≤®‡≥Å {verb[:-2]}{endings['present']}."
    future = f"{person} ‡≤®‡≤æ‡≤≥‡≥Ü {obj}‡≤®‡≥ç‡≤®‡≥Å {verb[:-2]}{endings['future']}."
    
    st.markdown(f"""
    ### üë§ {person}
    **‡≤≠‡≥Ç‡≤§ ‡≤ï‡≤æ‡≤≤:** {past}  
    **‡≤µ‡≤∞‡≥ç‡≤§‡≤Æ‡≤æ‡≤® ‡≤ï‡≤æ‡≤≤:** {present}  
    **‡≤≠‡≤µ‡≤ø‡≤∑‡≥ç‡≤Ø ‡≤ï‡≤æ‡≤≤:** {future}
    """)
    
    output += f"{person}\n{past}\n{present}\n{future}\n\n"

# --- Optional DOCX download ---
doc = Document()
doc.add_paragraph(output)
buffer = BytesIO()
doc.save(buffer)
buffer.seek(0)

st.download_button(
    "‚¨áÔ∏è DOCX ‡≤°‡≥å‡≤®‡≥ç‚Äå‡≤≤‡≥ã‡≤°‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø (Download Sentences)",
    data=buffer,
    file_name=f"{verb}_sentences.docx",
    mime="application/vnd.openxmlformats-officedocument.wordprocessingml.document"
)
